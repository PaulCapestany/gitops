# Helm unittest tests
suite: 
  - it: "Service should be created"
    asserts:
      - hasDocuments:
          kind: Service
  - it: "Deployment should have a correctly formatted image tag"
    asserts:
      - regexMatch:
          path: "spec.template.spec.containers[0].image"
          pattern: "^quay.io/paulcapestany/toy-service:v[0-9]+\\.[0-9]+\\.[0-9]+-[a-f0-9]{7}$"
        set:
          - helm/toy-service/values-dev.yaml